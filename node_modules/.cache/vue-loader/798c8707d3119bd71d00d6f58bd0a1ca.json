{"remainingRequest":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/user1/桌面/vue/D2AdminICE-master/src/pages/Orders/Orders.vue?vue&type=style&index=0&id=cb5dd40a&lang=scss&scoped=true&","dependencies":[{"path":"/home/user1/桌面/vue/D2AdminICE-master/src/pages/Orders/Orders.vue","mtime":1558765846334},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"./Orders.scss\";\n",{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiTA","file":"Orders.vue","sourceRoot":"src/pages/Orders","sourcesContent":["<template>\n  <!-- d2-container 文档 https://doc.d2admin.fairyever.com/zh/sys-components/container.html -->\n  <d2-container class=\"page-Orders\">\n    <template slot=\"header\">管理员</template>\n    <template>\n      <div>\n        <d2-crud\n          :columns=\"columns\"\n          :data=\"data\"\n          :loading=\"loading\"\n          :pagination=\"pagination\"\n          :options=\"options\"\n          :form-template=\"formTemplate\"\n          :form-options=\"formOptions\"\n          :form-rules=\"formRules\"\n          :rowHandle=\"rowHandle\"\n          selection-row\n          @selection-change=\"handleSelectionChange\"\n          @row-add=\"handleRowAdd\"\n          @row-edit=\"handleDialogEdit\"\n          @row-remove=\"handleRowRemove\"\n          @dialog-cancel=\"handleDialogCancel\"\n          @pagination-current-change=\"paginationCurrentChange\"\n        >\n          <add-button slot=\"headerButton\"/>\n          <el-button slot=\"headerButton\" icon=\"el-icon-refresh\" size=\"small\" type=\"success\" @click=\"refreshData\">刷新</el-button>\n          <el-button slot=\"headerButton\" type=\"danger\" icon=\"el-icon-delete\" size=\"small\">删除</el-button>\n        </d2-crud>\n      </div>\n    </template>\n    <template slot=\"footer\">footer</template>\n  </d2-container>\n</template>\n\n<script>\nimport AddDialog from \"./components/AddDialog\";\nimport { mapActions } from \"vuex\";\nimport util from \"@/libs/util.js\";\nexport default {\n  components: {\n    \"add-button\": AddDialog\n  },\n  name: \"OrdersForm\",\n  data() {\n    return {\n      columns: [\n        {\n          title: \"订单编号\",\n          dataIndex: \"code\",\n          key: \"code\"\n        },\n        {\n          title: \"客户名词\",\n          dataIndex: \"customerName\",\n          key: \"customerName\"\n        },\n        {\n          title: \"创建时间\",\n          dataIndex: \"creationTime\",\n          key: \"creationTime\",\n          formatter: this.formatDate\n        },\n        {\n          title: \"订单状态\",\n          dataIndex: \"status\",\n          key: \"status\",\n          filters: [\n            { text: \"新增\", value: 1 },\n            { text: \"已付款\", value: 10 },\n            { text: \"已完成\", value: 20 }\n          ],\n          filterMethod(value, row) {\n            return row.isActive === value;\n          },\n          filterPlacement: \"bottom-end\"\n        },\n        {\n          title: \"上次登录时间\",\n          dataIndex: \"lastLoginTime\",\n          key: \"lastLoginTime\",\n          width: 240,\n          sortable: true,\n          formatter: this.formatDate\n        }\n      ],\n      data: [],\n      loading: true,\n      pagination: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 0,\n        layout: \"prev, pager, next, total\"\n      },\n      options: {\n        stripe: true\n      },\n      rowHandle: {\n        columnHeader: \"操作\",\n        edit: {\n          icon: \"el-icon-edit\",\n          text: \"编辑\",\n          size: \"small\"\n        },\n        remove: {\n          icon: \"el-icon-delete\",\n          text: \"删除\",\n          type: \"danger\",\n          size: \"small\",\n          disabled(index, row) {\n            if (row.OrdersName == \"admin\") {\n              return true;\n            }\n            return false;\n          }\n        }\n      },\n      formTemplate: {\n        OrdersName: {\n          title: \"用户名\",\n          component: {\n            name: \"el-input\",\n            disabled: true,\n            span: 12\n          }\n        },\n        id: {\n          title: \"ID\",\n          component: {\n            name: \"el-input\",\n            disabled: true,\n            span: 12\n          }\n        },\n        name: {\n          title: \"姓\",\n          component: {\n            name: \"el-input\",\n            clearable: true,\n            span: 6\n          }\n        },\n        surname: {\n          title: \"名\",\n          component: {\n            name: \"el-input\",\n            clearable: true,\n            span: 6\n          }\n        },\n        fullName: {\n          title: \"全称\",\n          component: {\n            name: \"el-input\",\n            disabled: true,\n            span: 6\n          }\n        },\n        emailAddress: {\n          title: \"邮箱\",\n          component: {\n            name: \"el-input\",\n            clearable: true\n          }\n        },\n        roleNames: {\n          title: \"角色\",\n          component: {\n            name: \"el-input\",\n            visible: false\n          },\n          visible: false\n        },\n        lastLoginTime: {\n          title: \"上次登录时间\",\n          component: {\n            name: \"el-date-picker\",\n            type: \"datetime\",\n            disabled: true,\n            span: 8\n          }\n        },\n        creationTime: {\n          title: \"创建时间\",\n          component: {\n            name: \"el-date-picker\",\n            type: \"datetime\",\n            disabled: true,\n            span: 8\n          }\n        },\n        isActive: {\n          title: \"有效\",\n          component: {\n            name: \"el-switch\"\n          }\n        }\n      },\n      formOptions: {\n        labelWidth: \"120px\",\n        labelPosition: \"right\",\n        saveLoading: false\n      },\n      formRules: {\n        OrdersName: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" }\n        ],\n        name: [{ required: true, message: \"请输入姓\", trigger: \"blur\" }],\n        surname: [{ required: true, message: \"请输入名\", trigger: \"blur\" }],\n        emailAddress: [\n          { required: true, message: \"请输入电子邮箱\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  mounted() {\n    this.fetchData(this.pagination.currentPage, this.pagination.pageSize);\n  },\n  methods: {\n    ...mapActions(\"d2admin/orders\", [\n      \"GetAllOrders\",\n      \"OrdersCreateOrUpdate\",\n      \"OrdersDel\"\n    ]),\n    paginationCurrentChange(currentPage) {\n      this.pagination.currentPage = currentPage;\n      this.fetchData(currentPage, this.pagination.pageSize);\n    },\n    formatDate(row, column, cellValue, index) {\n      var timestr = new Date(cellValue);\n      return util.Dtformat(\"yyyy-MM-dd hh:mm:ss\", timestr);\n    },\n    fetchData(page, pageSize) {\n      this.loading = true;\n      this.GetAllOrders({\n        SkipCount: (page - 1) * pageSize,\n        MaxResultCount: pageSize\n      })\n        .then(res => {\n          this.data = res.result;\n          this.pagination.total = res.result.length;\n          this.loading = false;\n        })\n        .catch(err => {\n          console.log(\"err\", err);\n          this.loading = false;\n        });\n    },\n    handleRowAdd(row, done) {\n      this.formOptions.saveLoading = true;\n      this.OrdersCreateOrUpdate(row).then(async res => {\n        console.log(res);\n        this.$message({\n          message: \"保存成功\",\n          type: \"success\"\n        });\n      });\n      done({\n        address: \"我是通过d1one事件传入的数据！\"\n      });\n      this.formOptions.saveLoading = false;\n    },\n    handleDialogCancel(done) {\n      this.$message({\n        message: \"取消保存\",\n        type: \"warning\"\n      });\n      done();\n    },\n    handleDialogEdit(datas, done) {\n      this.formOptions.saveLoading = true;\n      this.OrdersCreateOrUpdate(datas.row).then(async res => {\n        console.log(res);\n        this.$message({\n          message: \"保存成功\",\n          type: \"success\"\n        });\n      });\n      this.formOptions.saveLoading = false;\n      done();\n    },\n    handleRowRemove({ index, row }, done) {\n      this.OrdersDel({ id: row.id }).then(async res => {\n        this.$message({\n          message: \"删除成功\",\n          type: \"success\"\n        });\n      });\n      done();\n    },\n    handleSelectionChange(selection) {\n      console.log(selection);\n    },\n    refreshData() {\n      this.loading = true;\n      this.fetchData(this.pagination.currentPage, this.pagination.pageSize);\n    },\n    handleAddDialog() {\n      console.log(AddDialog);\n      AddDialog.dialogFormVisible = true;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./Orders.scss\";\n</style>\n"]}]}