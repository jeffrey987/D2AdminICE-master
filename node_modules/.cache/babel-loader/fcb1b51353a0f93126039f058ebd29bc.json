{"remainingRequest":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/babel-loader/lib/index.js!/home/user1/桌面/vue/D2AdminICE-master/node_modules/eslint-loader/index.js??ref--13-0!/home/user1/桌面/vue/D2AdminICE-master/src/store/modules/d2admin/modules/theme.js","dependencies":[{"path":"/home/user1/桌面/vue/D2AdminICE-master/src/store/modules/d2admin/modules/theme.js","mtime":1557910292529},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/user1/\\u684C\\u9762/vue/D2AdminICE-master/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\n// 设置文件\nimport setting from '@/setting.js';\nexport default {\n  namespaced: true,\n  state: {\n    // 主题\n    list: setting.theme.list,\n    // 现在激活的主题 这应该是一个名字 不是对象\n    activeName: setting.theme.list[0].name\n  },\n  getters: {\n    /**\n     * @description 返回当前的主题信息 不是一个名字 而是当前激活主题的所有数据\n     * @param {Object} state vuex state\n     */\n    activeSetting: function activeSetting(state) {\n      return state.list.find(function (theme) {\n        return theme.name === state.activeName;\n      });\n    }\n  },\n  actions: {\n    /**\n     * @description 激活一个主题\n     * @param {Object} state vuex state\n     * @param {String} themeValue 需要激活的主题名称\n     */\n    set: function set(_ref, themeName) {\n      var state = _ref.state,\n          commit = _ref.commit,\n          dispatch = _ref.dispatch;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(resolve) {\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  // 检查这个主题在主题列表里是否存在\n                  state.activeName = state.list.find(function (e) {\n                    return e.name === themeName;\n                  }) ? themeName : state.list[0].name; // 将 vuex 中的主题应用到 dom\n\n                  commit('dom'); // 持久化\n\n                  _context.next = 4;\n                  return dispatch('d2admin/db/set', {\n                    dbName: 'sys',\n                    path: 'theme.activeName',\n                    value: state.activeName,\n                    user: true\n                  }, {\n                    root: true\n                  });\n\n                case 4:\n                  // end\n                  resolve();\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    },\n\n    /**\n     * @description 从持久化数据加载主题设置\n     * @param {Object} state vuex state\n     */\n    load: function load(_ref3) {\n      var state = _ref3.state,\n          commit = _ref3.commit,\n          dispatch = _ref3.dispatch;\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref4 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee2(resolve) {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return dispatch('d2admin/db/get', {\n                    dbName: 'sys',\n                    path: 'theme.activeName',\n                    defaultValue: state.list[0].name,\n                    user: true\n                  }, {\n                    root: true\n                  });\n\n                case 2:\n                  state.activeName = _context2.sent;\n                  // 将 vuex 中的主题应用到 dom\n                  commit('dom'); // end\n\n                  resolve();\n\n                case 5:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x2) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n    }\n  },\n  mutations: {\n    /**\n     * @description 将 vuex 中的主题应用到 dom\n     * @param {Object} state vuex state\n     */\n    dom: function dom(state) {\n      document.body.className = \"theme-\".concat(state.activeName);\n    }\n  }\n};",{"version":3,"sources":["/home/user1/桌面/vue/D2AdminICE-master/src/store/modules/d2admin/modules/theme.js"],"names":["setting","namespaced","state","list","theme","activeName","name","getters","activeSetting","find","actions","set","themeName","commit","dispatch","Promise","resolve","e","dbName","path","value","user","root","load","defaultValue","mutations","dom","document","body","className"],"mappings":"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","sourcesContent":["// 设置文件\nimport setting from '@/setting.js'\n\nexport default {\n  namespaced: true,\n  state: {\n    // 主题\n    list: setting.theme.list,\n    // 现在激活的主题 这应该是一个名字 不是对象\n    activeName: setting.theme.list[0].name\n  },\n  getters: {\n    /**\n     * @description 返回当前的主题信息 不是一个名字 而是当前激活主题的所有数据\n     * @param {Object} state vuex state\n     */\n    activeSetting (state) {\n      return state.list.find(theme => theme.name === state.activeName)\n    }\n  },\n  actions: {\n    /**\n     * @description 激活一个主题\n     * @param {Object} state vuex state\n     * @param {String} themeValue 需要激活的主题名称\n     */\n    set ({ state, commit, dispatch }, themeName) {\n      return new Promise(async resolve => {\n        // 检查这个主题在主题列表里是否存在\n        state.activeName = state.list.find(e => e.name === themeName) ? themeName : state.list[0].name\n        // 将 vuex 中的主题应用到 dom\n        commit('dom')\n        // 持久化\n        await dispatch('d2admin/db/set', {\n          dbName: 'sys',\n          path: 'theme.activeName',\n          value: state.activeName,\n          user: true\n        }, { root: true })\n        // end\n        resolve()\n      })\n    },\n    /**\n     * @description 从持久化数据加载主题设置\n     * @param {Object} state vuex state\n     */\n    load ({ state, commit, dispatch }) {\n      return new Promise(async resolve => {\n        // store 赋值\n        state.activeName = await dispatch('d2admin/db/get', {\n          dbName: 'sys',\n          path: 'theme.activeName',\n          defaultValue: state.list[0].name,\n          user: true\n        }, { root: true })\n        // 将 vuex 中的主题应用到 dom\n        commit('dom')\n        // end\n        resolve()\n      })\n    }\n  },\n  mutations: {\n    /**\n     * @description 将 vuex 中的主题应用到 dom\n     * @param {Object} state vuex state\n     */\n    dom (state) {\n      document.body.className = `theme-${state.activeName}`\n    }\n  }\n}\n"]}]}