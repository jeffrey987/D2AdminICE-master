{"remainingRequest":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/babel-loader/lib/index.js!/home/user1/桌面/vue/D2AdminICE-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/user1/桌面/vue/D2AdminICE-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/user1/桌面/vue/D2AdminICE-master/src/pages/Tenants/components/D2Crud/D2Crud.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/user1/桌面/vue/D2AdminICE-master/src/pages/Tenants/components/D2Crud/D2Crud.vue","mtime":1557910292525},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user1/桌面/vue/D2AdminICE-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/user1/\\u684C\\u9762/vue/D2AdminICE-master/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/user1/\\u684C\\u9762/vue/D2AdminICE-master/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from \"vue\";\nimport D2Crud from \"@d2-projects/d2-crud\";\nimport { mapActions } from \"vuex\";\nVue.use(D2Crud);\nexport default {\n  data: function data() {\n    return {\n      columns: [{\n        title: \"名称\",\n        key: \"name\",\n        width: \"180\"\n      }, {\n        title: \"租户名称\",\n        key: \"tenancyName\"\n      }, {\n        title: \"激活\",\n        key: \"isActive\"\n      }, {\n        title: \"ID\",\n        key: \"id\",\n        width: \"100\",\n        sortable: true\n      }],\n      data: [],\n      loading: true,\n      createData: {\n        tenancyName: \"\",\n        name: \"\",\n        adminEmailAddress: \"\",\n        connectionString: \"\",\n        isActive: true\n      },\n      addButton: {\n        icon: \"el-icon-plus\",\n        size: \"small\",\n        type: \"primary\"\n      },\n      rowHandle: {\n        columnHeader: \"编辑表格\",\n        edit: {\n          icon: \"el-icon-edit\",\n          text: \"编辑\",\n          size: \"small\"\n        },\n        remove: {\n          icon: \"el-icon-delete\",\n          size: \"small\",\n          fixed: \"right\",\n          confirm: true,\n          disabled: function disabled(index, row) {\n            if (row.name == \"Default\") {\n              return true;\n            }\n\n            return false;\n          }\n        }\n      },\n      formTemplate: {\n        id: {\n          title: \"ID\",\n          value: \"\",\n          component: {\n            span: 12,\n            disabled: true\n          }\n        },\n        name: {\n          title: \"名称\",\n          value: \"\"\n        },\n        tenancyName: {\n          title: \"租户名称\",\n          value: \"\",\n          component: {\n            span: 24\n          }\n        },\n        isActive: {\n          title: \"激活\",\n          value: false,\n          component: {\n            name: \"el-switch\",\n            span: 12\n          }\n        }\n      },\n      formRules: {\n        name: [{\n          required: true,\n          message: \"请输入名称\",\n          trigger: \"change\"\n        }],\n        tenancyName: [{\n          required: true,\n          message: \"请输入租户名称\",\n          trigger: \"blur\"\n        }]\n      },\n      formOptions: {\n        labelWidth: \"80px\",\n        labelPosition: \"left\",\n        saveLoading: false,\n        gutter: 20\n      },\n      pagination: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 0\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.fetchData();\n  },\n  methods: _objectSpread({}, mapActions(\"d2admin/Tenants\", [\"GetAll\", \"CreateOrUpdate\"]), {\n    handleRowAdd: function handleRowAdd(row, done) {\n      var _this = this;\n\n      this.formOptions.saveLoading = true;\n      this.createData.name = row.name;\n      this.createData.tenancyName = row.name;\n      this.createData.isActive = row.isActive;\n      this.createData.adminEmailAddress = row.name + \"@demo.com\";\n      this.CreateOrUpdate(this.createData).then(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(res) {\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _this.$message({\n                    message: \"添加成功\",\n                    type: \"success\"\n                  });\n\n                  done();\n                  _this.formOptions.saveLoading = false;\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    },\n    handleRowEdit: function handleRowEdit(_ref2, done) {\n      var _this2 = this;\n\n      var index = _ref2.index,\n          row = _ref2.row;\n      this.formOptions.saveLoading = true;\n      console.log(index);\n      console.log(row);\n      this.CreateOrUpdate(row).then(\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee2(res) {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _this2.$message({\n                    message: \"编辑成功\",\n                    type: \"success\"\n                  });\n\n                  done();\n                  _this2.formOptions.saveLoading = false;\n\n                case 3:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    },\n    handleRowRemove: function handleRowRemove(_ref4, done) {\n      var _this3 = this;\n\n      var index = _ref4.index,\n          row = _ref4.row;\n      setTimeout(function () {\n        console.log(index);\n        console.log(row);\n\n        _this3.$message({\n          message: \"删除成功\",\n          type: \"success\"\n        });\n\n        done();\n      }, 300);\n    },\n    handleDialogCancel: function handleDialogCancel(done) {\n      this.$message({\n        message: \"取消保存\",\n        type: \"warning\"\n      });\n      done();\n    },\n    handleSelectionChange: function handleSelectionChange(selection) {\n      console.log(selection);\n    },\n    fetchData: function fetchData() {\n      var _this4 = this;\n\n      this.loading = true;\n      this.GetAll({\n        vm: this,\n        skipCount: (this.pagination.currentPage - 1) * this.pagination.pageSize,\n        maxResultCount: this.pagination.pageSize\n      }).then(function (res) {\n        _this4.data = res.result;\n        _this4.loading = false;\n      });\n    }\n  })\n};",{"version":3,"sources":["D2Crud.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"d2-crud\">\n    <!-- 使用方法请参考文档和示例 -->\n    <!-- 文档： https://d2-projects.github.io/d2-admin-doc/zh/ecosystem-d2-crud/ -->\n    <!-- 示例： https://d2-projects.github.io/d2-admin/#/demo/d2-crud/index -->\n    <d2-crud\n      ref=\"d2Crud\"\n      :columns=\"columns\"\n      :data=\"data\"\n      :loading=\"loading\"\n      title=\"所有租户\"\n      selection-row\n      index-row\n      add-mode\n      :add-button=\"addButton\"\n      :rowHandle=\"rowHandle\"\n      :form-template=\"formTemplate\"\n      :form-rules=\"formRules\"\n      :form-options=\"formOptions\"\n      :pagination=\"pagination\"\n      @row-add=\"handleRowAdd\"\n      @row-edit=\"handleRowEdit\"\n      @row-remove=\"handleRowRemove\"\n      @dialog-cancel=\"handleDialogCancel\"\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-button slot=\"headerButton\" icon=\"el-icon-refresh\" size=\"small\" type=\"success\" @click=\"fetchData\">刷新</el-button>\n    </d2-crud>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport D2Crud from \"@d2-projects/d2-crud\";\nimport { mapActions } from \"vuex\";\n\nVue.use(D2Crud);\n\nexport default {\n  data() {\n    return {\n      columns: [\n        {\n          title: \"名称\",\n          key: \"name\",\n          width: \"180\"\n        },\n        {\n          title: \"租户名称\",\n          key: \"tenancyName\"\n        },\n        {\n          title: \"激活\",\n          key: \"isActive\"\n        },\n        {\n          title: \"ID\",\n          key: \"id\",\n          width: \"100\",\n          sortable: true\n        }\n      ],\n      data: [],\n      loading: true,\n      createData: {\n        tenancyName: \"\",\n        name: \"\",\n        adminEmailAddress: \"\",\n        connectionString: \"\",\n        isActive: true\n      },\n      addButton: {\n        icon: \"el-icon-plus\",\n        size: \"small\",\n        type: \"primary\"\n      },\n      rowHandle: {\n        columnHeader: \"编辑表格\",\n        edit: {\n          icon: \"el-icon-edit\",\n          text: \"编辑\",\n          size: \"small\"\n        },\n        remove: {\n          icon: \"el-icon-delete\",\n          size: \"small\",\n          fixed: \"right\",\n          confirm: true,\n          disabled(index, row) {\n            if (row.name == \"Default\") {\n              return true;\n            }\n            return false;\n          }\n        }\n      },\n      formTemplate: {\n        id: {\n          title: \"ID\",\n          value: \"\",\n          component: {\n            span: 12,\n            disabled: true\n          }\n        },\n        name: {\n          title: \"名称\",\n          value: \"\"\n        },\n        tenancyName: {\n          title: \"租户名称\",\n          value: \"\",\n          component: {\n            span: 24\n          }\n        },\n        isActive: {\n          title: \"激活\",\n          value: false,\n          component: {\n            name: \"el-switch\",\n            span: 12\n          }\n        }\n      },\n      formRules: {\n        name: [{ required: true, message: \"请输入名称\", trigger: \"change\" }],\n        tenancyName: [\n          { required: true, message: \"请输入租户名称\", trigger: \"blur\" }\n        ]\n      },\n      formOptions: {\n        labelWidth: \"80px\",\n        labelPosition: \"left\",\n        saveLoading: false,\n        gutter: 20\n      },\n      pagination: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 0\n      }\n    };\n  },\n  mounted() {\n    this.fetchData();\n  },\n  methods: {\n    ...mapActions(\"d2admin/Tenants\", [\"GetAll\", \"CreateOrUpdate\"]),\n    handleRowAdd(row, done) {\n      this.formOptions.saveLoading = true;\n      this.createData.name = row.name;\n      this.createData.tenancyName = row.name;\n      this.createData.isActive = row.isActive;\n      this.createData.adminEmailAddress = row.name + \"@demo.com\";\n      this.CreateOrUpdate(this.createData).then(async res => {\n        this.$message({\n          message: \"添加成功\",\n          type: \"success\"\n        });\n        done();\n        this.formOptions.saveLoading = false;\n      });\n    },\n    handleRowEdit({ index, row }, done) {\n      this.formOptions.saveLoading = true;\n      console.log(index);\n      console.log(row);\n      this.CreateOrUpdate(row).then(async res => {\n        this.$message({\n          message: \"编辑成功\",\n          type: \"success\"\n        });\n        done();\n        this.formOptions.saveLoading = false;\n      });\n    },\n    handleRowRemove({ index, row }, done) {\n      setTimeout(() => {\n        console.log(index);\n        console.log(row);\n        this.$message({\n          message: \"删除成功\",\n          type: \"success\"\n        });\n        done();\n      }, 300);\n    },\n    handleDialogCancel(done) {\n      this.$message({\n        message: \"取消保存\",\n        type: \"warning\"\n      });\n      done();\n    },\n    handleSelectionChange(selection) {\n      console.log(selection);\n    },\n    fetchData() {\n      this.loading = true;\n      this.GetAll({\n        vm: this,\n        skipCount: (this.pagination.currentPage - 1) * this.pagination.pageSize,\n        maxResultCount: this.pagination.pageSize\n      }).then(res => {\n        this.data = res.result;\n        this.loading = false;\n      });\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/pages/Tenants/components/D2Crud"}]}